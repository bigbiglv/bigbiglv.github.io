import{P as v,C as m,aE as y,j as x,o as p}from"./index.b0acb0dd.js";const k={setup(D){const t=v(null),c=v(!1),i=m([]);return y(()=>{const n=t.value.getContext("2d");let a="rect",o=null;function f(e,l,u){this.x=e,this.y=l,this.type=u}function r(e,l,u){console.log("x, y, type",e,l,u);let s=t.value.getBoundingClientRect();return new f(e-s.left*(t.value.width/s.width),l-s.top*(t.value.height/s.height),u)}function d(e){let l=Math.abs(e.x-o.x),u=Math.abs(e.y-o.y),s=e.x>o.x?o.x:e.x,w=e.y>o.y?o.y:e.y;n.save(),n.beginPath(),n.rect(s,w,l,u),n.stroke(),n.restore()}function g(){n.putImageData(i[i.length-1].data,0,0)}function h(e){i.push({mode:a,data:n.getImageData(0,0,t.value.width,t.value.height)}),console.log("history",i)}t.value.onmousedown=function(e){e.preventDefault(),o=r(e.clientX,e.clientY,e.which),c.value=!0},t.value.onmousemove=function(e){e.preventDefault(),c.value&&a==="rect"&&(g(),d(r(e.clientX,e.clientY,e.which)))},h(),t.value.onmouseup=function(e){e.preventDefault(),c.value=!1,h(),console.log("mousedown",o)}}),(n,a)=>(p(),x("canvas",{ref_key:"canvas",ref:t,width:"640",height:"480",style:{"background-color":"antiquewhite"},onMousemove:a[0]||(a[0]=()=>{}),onContextmenu:a[1]||(a[1]=o=>o.preventDefault())},null,544))}};export{k as default};
