import{a$ as dt,f as T,P as B,T as st,d as J,h as x,c as wn,ax as Rn,a6 as ze,u as Me,aE as Nn,aB as me,a5 as nn,O as E,aK as A,v as M,a as S,b as H,x as $,b0 as Be,z as ct,A as ut,a8 as re,ak as G,e as Oe,B as ft,i as hn,g as _n,a4 as ht,b1 as Kn,a1 as vt,aX as $e,a7 as bt,aZ as gt,a3 as yt,b2 as pt,b3 as mt,b4 as kt,aY as xt,J as Ct,ai as St,ar as wt,N as Rt,al as Ze,ad as Dn,b5 as Nt,av as vn,b6 as _t,b7 as bn,y as Ee,aC as Kt,a9 as Ne,R as Le,ae as gn,b8 as yn,am as Dt,ao as Tt,b9 as pn,at as At,_ as Et,o as de,G as Je,w as se,k as ce,s as oe,l as Ie,q as mn,aS as en,j as Fe,D as kn,F as xn,ba as Lt,aT as It,aU as Pt,aV as Bt,aa as Ft,bb as $t,bc as zt,bd as Mt}from"./index.800a1ccd.js";import{e as Ot,V as Ut,N as Vt}from"./Empty.ba81d381.js";function jt(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(l=>{if(l==="")return;const[i,o]=l.split(":");o===void 0?t[""]=i:t[i]=o}),t}function _e(e,t){var l;if(e==null)return;const i=jt(e);if(t===void 0)return i[""];if(typeof t=="string")return(l=i[t])!==null&&l!==void 0?l:i[""];if(Array.isArray(t)){for(let o=t.length-1;o>=0;--o){const a=t[o];if(a in i)return i[a]}return i[""]}else{let o,a=-1;return Object.keys(i).forEach(c=>{const d=Number(c);!Number.isNaN(d)&&t>=d&&d>=a&&(a=d,o=i[c])}),o}}function Tn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Gt={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function Ht(e){return`(min-width: ${e}px)`}const Ke={};function qt(e=Gt){if(!dt)return T(()=>[]);if(typeof window.matchMedia!="function")return T(()=>[]);const t=B({}),l=Object.keys(e),i=(o,a)=>{o.matches?t.value[a]=!0:t.value[a]=!1};return l.forEach(o=>{const a=e[o];let c,d;Ke[a]===void 0?(c=window.matchMedia(Ht(a)),c.addEventListener?c.addEventListener("change",u=>{d.forEach(f=>{f(u,o)})}):c.addListener&&c.addListener(u=>{d.forEach(f=>{f(u,o)})}),d=new Set,Ke[a]={mql:c,cbs:d}):(c=Ke[a].mql,d=Ke[a].cbs),d.add(i),c.matches&&d.forEach(u=>{u(c,o)})}),st(()=>{l.forEach(o=>{const{cbs:a}=Ke[e[o]];a.has(i)&&a.delete(i)})}),T(()=>{const{value:o}=t;return l.filter(a=>o[a])})}var Xt=J({name:"Switcher",render(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},x("path",{d:"M12 8l10 8l-10 8z"}))}}),Yt={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px"};const Qt=e=>{const{baseColor:t,inputColorDisabled:l,cardColor:i,modalColor:o,popoverColor:a,textColorDisabled:c,borderColor:d,primaryColor:u,textColor2:f,fontSizeSmall:v,fontSizeMedium:m,fontSizeLarge:g,borderRadiusSmall:s,lineHeight:y}=e;return Object.assign(Object.assign({},Yt),{labelLineHeight:y,fontSizeSmall:v,fontSizeMedium:m,fontSizeLarge:g,borderRadius:s,color:t,colorChecked:u,colorDisabled:l,colorDisabledChecked:l,colorTableHeader:i,colorTableHeaderModal:o,colorTableHeaderPopover:a,checkMarkColor:t,checkMarkColorDisabled:c,checkMarkColorDisabledChecked:c,border:`1px solid ${d}`,borderDisabled:`1px solid ${d}`,borderDisabledChecked:`1px solid ${d}`,borderChecked:`1px solid ${u}`,borderFocus:`1px solid ${u}`,boxShadowFocus:`0 0 0 2px ${Rn(u,{alpha:.3})}`,textColor:f,textColorDisabled:c})},Wt={name:"Checkbox",common:wn,self:Qt};var An=Wt,Zt=x("svg",{viewBox:"0 0 64 64",class:"check-icon"},x("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),Jt=x("svg",{viewBox:"0 0 100 100",class:"line-icon"},x("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"}));const En=ze("n-checkbox-group"),eo={min:Number,max:Number,size:String,value:Array,defaultValue:{type:Array,default:null},disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}};J({name:"CheckboxGroup",props:eo,setup(e){const{mergedClsPrefixRef:t}=Me(e),l=Nn(e),{mergedSizeRef:i,mergedDisabledRef:o}=l,a=B(e.defaultValue),c=T(()=>e.value),d=me(c,a),u=T(()=>{var m;return((m=d.value)===null||m===void 0?void 0:m.length)||0}),f=T(()=>Array.isArray(d.value)?new Set(d.value):new Set);function v(m,g){const{nTriggerFormInput:s,nTriggerFormChange:y}=l,{onChange:k,"onUpdate:value":_,onUpdateValue:C}=e;if(Array.isArray(d.value)){const w=Array.from(d.value),L=w.findIndex(D=>D===g);m?~L||(w.push(g),C&&A(C,w),_&&A(_,w),s(),y(),a.value=w,k&&A(k,w)):~L&&(w.splice(L,1),C&&A(C,w),_&&A(_,w),k&&A(k,w),a.value=w,s(),y())}else m?(C&&A(C,[g]),_&&A(_,[g]),k&&A(k,[g]),a.value=[g],s(),y()):(C&&A(C,[]),_&&A(_,[]),k&&A(k,[]),a.value=[],s(),y())}return nn(En,{checkedCountRef:u,maxRef:E(e,"max"),minRef:E(e,"min"),valueSetRef:f,disabledRef:o,mergedSizeRef:i,toggleCheckbox:v}),{mergedClsPrefix:t}},render(){return x("div",{class:`${this.mergedClsPrefix}-checkbox-group`,role:"group"},this.$slots)}});var no=M([S("checkbox",`
 line-height: var(--n-label-line-height);
 font-size: var(--n-font-size);
 outline: none;
 cursor: pointer;
 display: inline-flex;
 flex-wrap: nowrap;
 align-items: flex-start;
 word-break: break-word;
 --n-merged-color-table: var(--n-color-table);
 `,[M("&:hover",[S("checkbox-box",[H("border",{border:"var(--n-border-checked)"})])]),M("&:focus:not(:active)",[S("checkbox-box",[H("border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),$("inside-table",[S("checkbox-box",`
 background-color: var(--n-merged-color-table);
 `)]),$("checked",[S("checkbox-box",`
 background-color: var(--n-color-checked);
 `,[S("checkbox-icon",[M(".check-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),$("indeterminate",[S("checkbox-box",[S("checkbox-icon",[M(".check-icon",`
 opacity: 0;
 transform: scale(.5);
 `),M(".line-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),$("checked, indeterminate",[M("&:focus:not(:active)",[S("checkbox-box",[H("border",`
 border: var(--n-border-checked);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),S("checkbox-box",`
 background-color: var(--n-color-checked);
 border-left: 0;
 border-top: 0;
 `,[H("border",{border:"var(--n-border-checked)"})])]),$("disabled",{cursor:"not-allowed"},[$("checked",[S("checkbox-box",`
 background-color: var(--n-color-disabled-checked);
 `,[H("border",{border:"var(--n-border-disabled-checked)"}),S("checkbox-icon",[M(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),S("checkbox-box",`
 background-color: var(--n-color-disabled);
 `,[H("border",{border:"var(--n-border-disabled)"}),S("checkbox-icon",[M(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled)"})])]),H("label",{color:"var(--n-text-color-disabled)"})]),S("checkbox-box-wrapper",`
 position: relative;
 width: var(--n-size);
 flex-shrink: 0;
 flex-grow: 0;
 `),S("checkbox-box",`
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 height: var(--n-size);
 width: var(--n-size);
 display: inline-block;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color 0.3s var(--n-bezier);
 `,[H("border",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border: var(--n-border);
 `),S("checkbox-icon",`
 display: flex;
 align-items: center;
 justify-content: center;
 position: absolute;
 left: 1px;
 right: 1px;
 top: 1px;
 bottom: 1px;
 `,[M(".check-icon, .line-icon",`
 width: 100%;
 fill: var(--n-check-mark-color);
 opacity: 0;
 transform: scale(0.5);
 transform-origin: center;
 transition:
 fill 0.3s var(--n-bezier),
 transform 0.3s var(--n-bezier),
 opacity 0.3s var(--n-bezier),
 border-color 0.3s var(--n-bezier);
 `),Be({left:"1px",top:"1px"})])]),H("label",`
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 user-select: none;
 padding: var(--n-label-padding);
 `,[M("&:empty",{display:"none"})])]),ct(S("checkbox",`
 --n-merged-color-table: var(--n-color-table-modal);
 `)),ut(S("checkbox",`
 --n-merged-color-table: var(--n-color-table-popover);
 `))]);const to=Object.assign(Object.assign({},Oe.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]});var oo=J({name:"Checkbox",props:to,setup(e){const t=B(null),{mergedClsPrefixRef:l,inlineThemeDisabled:i,mergedRtlRef:o}=Me(e),a=Nn(e,{mergedSize(R){const{size:O}=e;if(O!==void 0)return O;if(u){const{value:z}=u.mergedSizeRef;if(z!==void 0)return z}if(R){const{mergedSize:z}=R;if(z!==void 0)return z.value}return"medium"},mergedDisabled(R){const{disabled:O}=e;if(O!==void 0)return O;if(u){if(u.disabledRef.value)return!0;const{maxRef:{value:z},checkedCountRef:X}=u;if(z!==void 0&&X.value>=z&&!g.value)return!0;const{minRef:{value:p}}=u;if(p!==void 0&&X.value<=p&&g.value)return!0}return R?R.disabled.value:!1}}),{mergedDisabledRef:c,mergedSizeRef:d}=a,u=re(En,null),f=B(e.defaultChecked),v=E(e,"checked"),m=me(v,f),g=G(()=>{if(u){const R=u.valueSetRef.value;return R&&e.value!==void 0?R.has(e.value):!1}else return m.value===e.checkedValue}),s=Oe("Checkbox","-checkbox",no,An,e,l);function y(R){if(u&&e.value!==void 0)u.toggleCheckbox(!g.value,e.value);else{const{onChange:O,"onUpdate:checked":z,onUpdateChecked:X}=e,{nTriggerFormInput:p,nTriggerFormChange:K}=a,P=g.value?e.uncheckedValue:e.checkedValue;z&&A(z,P,R),X&&A(X,P,R),O&&A(O,P,R),p(),K(),f.value=P}}function k(R){c.value||y(R)}function _(R){if(!c.value)switch(R.code){case"Space":case"Enter":case"NumpadEnter":y(R)}}function C(R){switch(R.code){case"Space":R.preventDefault()}}const w={focus:()=>{var R;(R=t.value)===null||R===void 0||R.focus()},blur:()=>{var R;(R=t.value)===null||R===void 0||R.blur()}},L=ft("Checkbox",o,l),D=T(()=>{const{value:R}=d,{common:{cubicBezierEaseInOut:O},self:{borderRadius:z,color:X,colorChecked:p,colorDisabled:K,colorTableHeader:P,colorTableHeaderModal:ee,colorTableHeaderPopover:Ue,checkMarkColor:Ve,checkMarkColorDisabled:Y,border:te,borderFocus:ke,borderDisabled:je,borderChecked:Ge,boxShadowFocus:ue,textColor:He,textColorDisabled:Te,checkMarkColorDisabledChecked:ae,colorDisabledChecked:fe,borderDisabledChecked:he,labelPadding:ve,labelLineHeight:be,[hn("fontSize",R)]:qe,[hn("size",R)]:xe}}=s.value;return{"--n-label-line-height":be,"--n-size":xe,"--n-bezier":O,"--n-border-radius":z,"--n-border":te,"--n-border-checked":Ge,"--n-border-focus":ke,"--n-border-disabled":je,"--n-border-disabled-checked":he,"--n-box-shadow-focus":ue,"--n-color":X,"--n-color-checked":p,"--n-color-table":P,"--n-color-table-modal":ee,"--n-color-table-popover":Ue,"--n-color-disabled":K,"--n-color-disabled-checked":fe,"--n-text-color":He,"--n-text-color-disabled":Te,"--n-check-mark-color":Ve,"--n-check-mark-color-disabled":Y,"--n-check-mark-color-disabled-checked":ae,"--n-font-size":qe,"--n-label-padding":ve}}),I=i?_n("checkbox",T(()=>d.value[0]),D,e):void 0;return Object.assign(a,w,{rtlEnabled:L,selfRef:t,mergedClsPrefix:l,mergedDisabled:c,renderedChecked:g,mergedTheme:s,labelId:ht(),handleClick:k,handleKeyUp:_,handleKeyDown:C,cssVars:i?void 0:D,themeClass:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender})},render(){var e;const{$slots:t,renderedChecked:l,mergedDisabled:i,indeterminate:o,privateInsideTable:a,cssVars:c,labelId:d,label:u,mergedClsPrefix:f,focusable:v,handleKeyUp:m,handleKeyDown:g,handleClick:s}=this;return(e=this.onRender)===null||e===void 0||e.call(this),x("div",{ref:"selfRef",class:[`${f}-checkbox`,this.themeClass,this.rtlEnabled&&`${f}-checkbox--rtl`,l&&`${f}-checkbox--checked`,i&&`${f}-checkbox--disabled`,o&&`${f}-checkbox--indeterminate`,a&&`${f}-checkbox--inside-table`],tabindex:i||!v?void 0:0,role:"checkbox","aria-checked":o?"mixed":l,"aria-labelledby":d,style:c,onKeyup:m,onKeydown:g,onClick:s,onMousedown:()=>{vt("selectstart",window,y=>{y.preventDefault()},{once:!0})}},x("div",{class:`${f}-checkbox-box-wrapper`},"\xA0",x("div",{class:`${f}-checkbox-box`},x(Kn,null,{default:()=>this.indeterminate?x("div",{key:"indeterminate",class:`${f}-checkbox-icon`},Jt):x("div",{key:"check",class:`${f}-checkbox-icon`},Zt)}),x("div",{class:`${f}-checkbox-box__border`}))),u!==null||t.default?x("span",{class:`${f}-checkbox__label`,id:d},t.default?t.default():u):null)}});const Cn=1,Ln=ze("n-grid"),In=1,ro={span:{type:[Number,String],default:In},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var ao=J({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ro,setup(){const{xGapRef:e,itemStyleRef:t,overflowRef:l}=re(Ln),i=bt();return{overflow:l,itemStyle:t,deriveStyle:()=>{const{privateSpan:o=In,privateShow:a=!0,privateColStart:c=void 0,privateOffset:d=0}=i.vnode.props,{value:u}=e,f=$e(u||0);return{display:a?"":"none",gridColumn:`${c!=null?c:`span ${o}`} / span ${o}`,marginLeft:d?`calc((100% - (${o} - 1) * ${f}) / ${o} * ${d} + ${f} * ${d})`:""}}}},render(){var e,t;return x("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}});const lo={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Pn=24,io={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Pn},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var so=J({name:"Grid",inheritAttrs:!1,props:io,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:l}=Me(e),i=/^\d+$/,o=B(void 0),a=qt((l==null?void 0:l.value)||lo),c=G(()=>!!(e.itemResponsive||!i.test(e.cols.toString())||!i.test(e.xGap.toString())||!i.test(e.yGap.toString()))),d=T(()=>{if(!!c.value)return e.responsive==="self"?o.value:a.value}),u=G(()=>{var k;return(k=Number(_e(e.cols.toString(),d.value)))!==null&&k!==void 0?k:Pn}),f=G(()=>_e(e.xGap.toString(),d.value)),v=G(()=>_e(e.yGap.toString(),d.value)),m=k=>{o.value=k.contentRect.width},g=k=>{yt(m,k)},s=B(!1),y=T(()=>{if(e.responsive==="self")return g});return nn(Ln,{itemStyleRef:E(e,"itemStyle"),xGapRef:f,overflowRef:s}),{mergedClsPrefix:t,style:T(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${u.value}, minmax(0, 1fr))`,columnGap:$e(f.value),rowGap:$e(v.value)})),isResponsive:c,responsiveQuery:d,responsiveCols:u,handleResize:y,overflow:s}},render(){const e=()=>{var t,l,i,o,a,c;this.overflow=!1;const d=pt(mt(this)),u=[],{collapsed:f,collapsedRows:v,responsiveCols:m,responsiveQuery:g}=this;d.forEach(C=>{var w,L,D;if(((w=C==null?void 0:C.type)===null||w===void 0?void 0:w.__GRID_ITEM__)!==!0)return;const I=kt(C),R=Number((D=_e((L=I.props)===null||L===void 0?void 0:L.span,g))!==null&&D!==void 0?D:Cn);R!==0&&u.push({child:I,rawChildSpan:R})});let s=0;const y=(t=u[u.length-1])===null||t===void 0?void 0:t.child;if(y!=null&&y.props){const C=(l=y.props)===null||l===void 0?void 0:l.suffix;C!==void 0&&C!==!1&&(s=(o=(i=y.props)===null||i===void 0?void 0:i.span)!==null&&o!==void 0?o:Cn,y.props.privateSpan=s,y.props.privateColStart=m+1-s,y.props.privateShow=!0)}let k=0,_=!1;for(const{child:C,rawChildSpan:w}of u){if(_&&(this.overflow=!0),!_){const L=Number((c=_e((a=C.props)===null||a===void 0?void 0:a.offset,g))!==null&&c!==void 0?c:0),D=Math.min(w+L,m)||1;if(C.props?(C.props.privateSpan=D,C.props.privateOffset=L):C.props={privateSpan:D,privateOffset:L},f){const I=k%m;D+I>m&&(k+=m-I),D+k+s>v*m?_=!0:k+=D}}_&&(C.props?C.props.privateShow!==!0&&(C.props.privateShow=!1):C.props={privateShow:!1})}return x("div",xt({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),u.map(({child:C})=>C))};return this.isResponsive&&this.responsive==="self"?x(gt,{onResize:this.handleResize},{default:e}):e()}});const co=e=>{const{borderRadiusSmall:t,hoverColor:l,pressedColor:i,primaryColor:o,textColor3:a,textColor2:c,textColorDisabled:d,fontSize:u}=e;return{fontSize:u,nodeBorderRadius:t,nodeColorHover:l,nodeColorPressed:i,nodeColorActive:Rn(o,{alpha:.1}),arrowColor:a,nodeTextColor:c,nodeTextColorDisabled:d,loadingColor:o,dropMarkColor:o}},uo=Ct({name:"Tree",common:wn,peers:{Checkbox:An,Scrollbar:St,Empty:Ot},self:co});var fo=uo;const Bn=ze("n-tree-select"),De=ze("n-tree");var ho=J({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:t}=re(De,null);return()=>{const{clsPrefix:l}=e;return x("span",{"data-switcher":!0,class:[`${l}-tree-node-switcher`,{[`${l}-tree-node-switcher--expanded`]:e.expanded,[`${l}-tree-node-switcher--hide`]:e.hide}],onClick:e.onClick},x("div",{class:`${l}-tree-node-switcher__icon`},x(Kn,null,{default:()=>{if(e.loading)return x(wt,{clsPrefix:l,key:"loading",radius:85,strokeWidth:20});const{value:i}=t;return i?i():x(Rt,{clsPrefix:l,key:"switcher"},{default:()=>x(Xt,null)})}})))}}}),vo=J({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=re(De);function l(o){const{onCheck:a}=e;if(a)return a(o)}function i(o){e.indeterminate?l(!1):l(o)}return{handleUpdateValue:i,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:l,indeterminate:i,disabled:o,focusable:a,handleUpdateValue:c}=this;return x("span",{class:`${e}-tree-node-checkbox`,"data-checkbox":!0},x(oo,{focusable:a,disabled:o,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:l,indeterminate:i,onUpdateChecked:c}))}}),bo=J({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:l,renderSuffixRef:i,labelFieldRef:o}=re(De),a=B(null);function c(u){const{onClick:f}=e;f&&f(u)}function d(u){c(u)}return{selfRef:a,renderLabel:t,renderPrefix:l,renderSuffix:i,labelField:o,handleClick:d}},render(){const{clsPrefix:e,labelField:t,nodeProps:l,checked:i=!1,selected:o=!1,renderLabel:a,renderPrefix:c,renderSuffix:d,handleClick:u,onDragstart:f,tmNode:{rawNode:v,rawNode:{prefix:m,suffix:g,[t]:s}}}=this;return x("span",Object.assign({},l,{ref:"selfRef",class:[`${e}-tree-node-content`,l==null?void 0:l.class],onClick:u,draggable:f===void 0?void 0:!0,onDragstart:f}),c||m?x("div",{class:`${e}-tree-node-content__prefix`},c?c({option:v,selected:o,checked:i}):Ze(m)):null,x("div",{class:`${e}-tree-node-content__text`},a?a({option:v,selected:o,checked:i}):Ze(s)),d||g?x("div",{class:`${e}-tree-node-content__suffix`},d?d({option:v,selected:o,checked:i}):Ze(g)):null)}});function Sn({position:e,offsetLevel:t,indent:l,el:i}){const o={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")o.left=0,o.top=0,o.bottom=0,o.borderRadius="inherit",o.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const a=e==="before"?"top":"bottom";o[a]=0,o.left=`${i.offsetLeft+6-t*l}px`,o.height="2px",o.backgroundColor="var(--n-drop-mark-color)",o.transformOrigin=a,o.borderRadius="1px",o.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return x("div",{style:o})}function go({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}const yo=J({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=re(De),{droppingNodeParentRef:l,droppingMouseNodeRef:i,draggingNodeRef:o,droppingPositionRef:a,droppingOffsetLevelRef:c,nodePropsRef:d,indentRef:u,blockLineRef:f}=t,v=T(()=>t.disabledRef.value||e.tmNode.disabled),m=T(()=>{const{value:p}=d;if(!!p)return p({option:e.tmNode.rawNode})}),g=B(null),s={value:null};Dn(()=>{s.value=g.value.$el});function y(){const{tmNode:p}=e;if(!p.isLeaf&&!p.shallowLoaded){t.loadingKeysRef.value.has(p.key)||t.loadingKeysRef.value.add(p.key);const{onLoadRef:{value:K}}=t;K&&K(p.rawNode).then(()=>{t.handleSwitcherClick(p)}).finally(()=>{t.loadingKeysRef.value.delete(p.key)})}else t.handleSwitcherClick(p)}const k=G(()=>!e.tmNode.disabled&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0));function _(p){!k.value||vn(p,"checkbox")||vn(p,"switcher")||t.handleSelect(e.tmNode)}function C(p){var K,P;f.value||(v.value||_(p),(P=(K=m.value)===null||K===void 0?void 0:K.onClick)===null||P===void 0||P.call(K,p))}function w(p){var K,P;!f.value||(v.value||_(p),(P=(K=m.value)===null||K===void 0?void 0:K.onClick)===null||P===void 0||P.call(K,p))}function L(p){t.handleCheck(e.tmNode,p)}function D(p){t.handleDragStart({event:p,node:e.tmNode})}function I(p){p.currentTarget===p.target&&t.handleDragEnter({event:p,node:e.tmNode})}function R(p){p.preventDefault(),t.handleDragOver({event:p,node:e.tmNode})}function O(p){t.handleDragEnd({event:p,node:e.tmNode})}function z(p){p.currentTarget===p.target&&t.handleDragLeave({event:p,node:e.tmNode})}function X(p){p.preventDefault(),a.value!==null&&t.handleDrop({event:p,node:e.tmNode,dropPosition:a.value})}return{showDropMark:G(()=>{const{value:p}=o;if(!p)return;const{value:K}=a;if(!K)return;const{value:P}=i;if(!P)return;const{tmNode:ee}=e;return ee.key===P.key}),showDropMarkAsParent:G(()=>{const{value:p}=l;if(!p)return!1;const{tmNode:K}=e,{value:P}=a;return P==="before"||P==="after"?p.key===K.key:!1}),pending:G(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:G(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:G(()=>{var p;return(p=t.highlightKeySetRef.value)===null||p===void 0?void 0:p.has(e.tmNode.key)}),checked:G(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),indeterminate:G(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:G(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:G(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:v,checkable:T(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),checkboxDisabled:T(()=>!!e.tmNode.rawNode.checkboxDisabled),selectable:k,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:f,nodeProps:m,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:a,droppingOffsetLevel:c,indent:u,contentInstRef:g,contentElRef:s,handleCheck:L,handleDrop:X,handleDragStart:D,handleDragEnter:I,handleDragOver:R,handleDragEnd:O,handleDragLeave:z,handleLineClick:w,handleContentClick:C,handleSwitcherClick:y}},render(){const{tmNode:e,clsPrefix:t,checkable:l,selectable:i,selected:o,checked:a,highlight:c,draggable:d,blockLine:u,indent:f,disabled:v,pending:m,internalScrollable:g,nodeProps:s}=this,y=d&&!v?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,k=g?Tn(e.key):void 0;return x("div",Object.assign({class:`${t}-tree-node-wrapper`},y),x("div",Object.assign({},u?s:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:o,[`${t}-tree-node--checkable`]:l,[`${t}-tree-node--highlight`]:c,[`${t}-tree-node--pending`]:m,[`${t}-tree-node--disabled`]:v,[`${t}-tree-node--selectable`]:i},s==null?void 0:s.class],"data-key":k,draggable:d&&u,onClick:this.handleLineClick,onDragstart:d&&u&&!v?this.handleDragStart:void 0}),Nt(e.level,x("div",{class:`${t}-tree-node-indent`,style:{flex:`0 0 ${f}px`}})),x(ho,{clsPrefix:t,expanded:this.expanded,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),l?x(vo,{focusable:this.checkboxFocusable,disabled:v||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null,x(bo,{ref:"contentInstRef",clsPrefix:t,checked:a,selected:o,onClick:this.handleContentClick,nodeProps:u?void 0:s,onDragstart:d&&!u&&!v?this.handleDragStart:void 0,tmNode:e}),d?this.showDropMark?Sn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:f}):this.showDropMarkAsParent?Sn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:f}):null:null))}});var Fn=yo;function $n(e,t,l,i){e==null||e.forEach(o=>{l(o),$n(o[t],t,l,i),i(o)})}function po(e,t,l,i,o){const a=new Set,c=new Set,d=[];return $n(e,i,u=>{if(d.push(u),o(t,u)){c.add(u[l]);for(let f=d.length-2;f>=0;--f)if(!a.has(d[f][l]))a.add(d[f][l]);else return}},()=>{d.pop()}),{expandedKeys:Array.from(a),highlightKeySet:c}}if(typeof window!="undefined"&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function mo(e,t,l,i,o){const a=new Set,c=new Set,d=new Set,u=[],f=[],v=[];function m(s){s.forEach(y=>{if(v.push(y),t(l,y)){a.add(y[i]),d.add(y[i]);for(let _=v.length-2;_>=0;--_){const C=v[_][i];if(!c.has(C))c.add(C),a.has(C)&&a.delete(C);else break}}const k=y[o];k&&m(k),v.pop()})}m(e);function g(s,y){s.forEach(k=>{const _=k[i],C=a.has(_),w=c.has(_);if(!C&&!w)return;const L=k[o];if(L)if(C)y.push(k);else{u.push(_);const D=Object.assign(Object.assign({},k),{[o]:[]});y.push(D),g(L,D[o])}else y.push(k)})}return g(e,f),{filteredTree:f,highlightKeySet:d,expandedKeys:u}}function ko({fNodesRef:e,mergedExpandedKeysRef:t,mergedSelectedKeysRef:l,handleSelect:i,handleSwitcherClick:o}){const{value:a}=l,c=re(Bn,null),d=c?c.pendingNodeKeyRef:B(a.length?a[a.length-1]:null);function u(v){const{value:m}=d;if(m===null){if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(v.code)&&m===null){const{value:g}=e;let s=0;for(;s<g.length;){if(!g[s].disabled){d.value=g[s].key;break}s+=1}}}else{const{value:g}=e;let s=g.findIndex(y=>y.key===m);if(!~s)return;if(v.code==="Enter"||v.code==="NumpadEnter")i(g[s]);else if(v.code==="ArrowDown")for(s+=1;s<g.length;){if(!g[s].disabled){d.value=g[s].key;break}s+=1}else if(v.code==="ArrowUp")for(s-=1;s>=0;){if(!g[s].disabled){d.value=g[s].key;break}s-=1}else if(v.code==="ArrowLeft"){const y=g[s];if(y.isLeaf||!t.value.includes(m)){const k=y.getParent();k&&(d.value=k.key)}else o(y)}else if(v.code==="ArrowRight"){const y=g[s];if(y.isLeaf)return;if(!t.value.includes(m))o(y);else for(s+=1;s<g.length;){if(!g[s].disabled){d.value=g[s].key;break}s+=1}}}}function f(v){switch(v.code){case"ArrowUp":case"ArrowDown":v.preventDefault()}}return{pendingNodeKeyRef:d,handleKeyup:u,handleKeydown:f}}var xo=J({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return x(_t,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>x("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:$e(this.height)}},this.nodes.map(t=>x(Fn,{clsPrefix:e,tmNode:t})))})}}),Co=S("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[M("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),M(">",[S("tree-node",[M("&:first-child",{marginTop:0})])]),S("tree-node-indent",`
 height: 0;
 `),S("tree-motion-wrapper",[$("expand",[bn({duration:"0.2s"})]),$("collapse",[bn({duration:"0.2s",reverse:!0})])]),S("tree-node-wrapper",`
 box-sizing: border-box;
 padding: 3px 0;
 `),S("tree-node",`
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[$("highlight",[S("tree-node-content",[H("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),$("disabled",[S("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ee("disabled",[$("selectable",[S("tree-node-content",`
 cursor: pointer;
 `)])])]),$("block-node",[S("tree-node-content",`
 width: 100%;
 `)]),Ee("block-line",[S("tree-node",[Ee("disabled",[S("tree-node-content",[M("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),$("selectable",[S("tree-node-content",[M("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),$("pending",[S("tree-node-content",`
 background-color: var(--n-node-color-hover);
 `)]),$("selected",[S("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),$("block-line",[S("tree-node",[Ee("disabled",[M("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),$("selectable",[M("&:active",{backgroundColor:"var(--n-node-color-pressed)"})]),$("pending",`
 background-color: var(--n-node-color-hover);
 `),$("selected",{backgroundColor:"var(--n-node-color-active)"})]),$("disabled",`
 cursor: not-allowed;
 `)])]),S("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[H("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[S("icon",[Be()]),S("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Be()]),S("base-icon",[Be()])]),$("hide",{visibility:"hidden"}),$("expanded",{transform:"rotate(90deg)"})]),S("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `),$("checkable",[S("tree-node-content",`
 padding: 0 6px;
 `)]),S("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[M("&:last-child",{marginBottom:0}),H("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),H("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow:1;
 `),H("suffix",`
 display: inline-flex;
 `)]),H("empty","margin: auto;")]),So=globalThis&&globalThis.__awaiter||function(e,t,l,i){function o(a){return a instanceof l?a:new l(function(c){c(a)})}return new(l||(l=Promise))(function(a,c){function d(v){try{f(i.next(v))}catch(m){c(m)}}function u(v){try{f(i.throw(v))}catch(m){c(m)}}function f(v){v.done?a(v.value):o(v.value).then(d,u)}f((i=i.apply(e,t||[])).next())})};const Pe=30;function wo(e,t){return{getKey(l){return l[e]},getChildren(l){return l[t]},getDisabled(l){return!!(l.disabled||l.checkboxDisabled)}}}const Ro={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},No=Object.assign(Object.assign(Object.assign(Object.assign({},Oe.props),{showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:go},animated:{type:Boolean,default:!0},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,renderSwitcherIcon:Function,nodeProps:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ro),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean});var _o=J({name:"Tree",props:No,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:l}=Me(e),i=Oe("Tree","-tree",Co,fo,e,t),o=B(null),a=B(null),c=B(null);function d(){var n;return(n=c.value)===null||n===void 0?void 0:n.listElRef}function u(){var n;return(n=c.value)===null||n===void 0?void 0:n.itemsElRef}const f=T(()=>{const{pattern:n}=e;return n?!n.length||!xe.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:mo(e.data,xe.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),v=T(()=>Kt(e.showIrrelevantNodes?e.data:f.value.filteredTree,wo(e.keyField,e.childrenField))),m=re(Bn,null),g=e.internalTreeSelect?m.dataTreeMate:v,{watchProps:s}=e,y=B([]);s!=null&&s.includes("defaultCheckedKeys")?Ne(()=>{y.value=e.defaultCheckedKeys}):y.value=e.defaultCheckedKeys;const k=E(e,"checkedKeys"),_=me(k,y),C=T(()=>g.value.getCheckedKeys(_.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),w=T(()=>e.leafOnly?"child":e.checkStrategy),L=T(()=>C.value.checkedKeys),D=T(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:C.value.indeterminateKeys}),I=B([]);s!=null&&s.includes("defaultSelectedKeys")?Ne(()=>{I.value=e.defaultSelectedKeys}):I.value=e.defaultSelectedKeys;const R=E(e,"selectedKeys"),O=me(R,I),z=B([]),X=n=>{z.value=e.defaultExpandAll?g.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};s!=null&&s.includes("defaultExpandedKeys")?Ne(()=>X(void 0)):Ne(()=>X(e.defaultExpandedKeys));const p=E(e,"expandedKeys"),K=me(p,z),P=T(()=>v.value.getFlattenedNodes(K.value)),{pendingNodeKeyRef:ee,handleKeyup:Ue,handleKeydown:Ve}=ko({mergedSelectedKeysRef:O,fNodesRef:P,mergedExpandedKeysRef:K,handleSelect:Ye,handleSwitcherClick:an});let Y=null,te=null;const ke=B(new Set),je=T(()=>e.internalHighlightKeySet||f.value.highlightKeySet),Ge=me(je,ke),ue=B(new Set),He=T(()=>K.value.filter(n=>!ue.value.has(n)));let Te=0;const ae=B(null),fe=B(null),he=B(null),ve=B(null),be=B(0),qe=T(()=>{const{value:n}=fe;return n?n.parent:null}),xe=T(()=>{const{filter:n}=e;if(n)return n;const{labelField:r}=e;return(h,b)=>h.length?b[r].toLowerCase().includes(h.toLowerCase()):!0});Le(E(e,"data"),()=>{ue.value.clear(),ee.value=null,Se()},{deep:!1});let Ce;Le(E(e,"pattern"),(n,r)=>{if(e.showIrrelevantNodes)if(Ce=void 0,n){const{expandedKeys:h,highlightKeySet:b}=po(e.data,e.pattern,e.keyField,e.childrenField,xe.value);ke.value=b,ye(h,Q(h))}else ke.value=new Set;else if(!n.length)Ce!==void 0&&ye(Ce,Q(Ce));else{r.length||(Ce=K.value);const{expandedKeys:h}=f.value;h!==void 0&&ye(h,Q(h))}});function tn(n){return So(this,void 0,void 0,function*(){const{onLoad:r}=e;if(!r)return yield Promise.resolve();const{value:h}=ue;return yield new Promise(b=>{h.has(n.key)||(h.add(n.key),r(n.rawNode).then(()=>{h.delete(n.key),b()}).catch(N=>{console.error(N),we()}))})})}Ne(()=>{var n;const{value:r}=v;if(!r)return;const{getNode:h}=r;(n=K.value)===null||n===void 0||n.forEach(b=>{const N=h(b);N&&!N.shallowLoaded&&tn(N)})});const ge=B(!1),ne=B([]);Le(He,(n,r)=>{if(!e.animated){gn(Ae);return}const h=new Set(r);let b=null,N=null;for(const U of n)if(!h.has(U)){if(b!==null)return;b=U}const W=new Set(n);for(const U of r)if(!W.has(U)){if(N!==null)return;N=U}if(b!==null&&N!==null||b===null&&N===null)return;const{virtualScroll:V}=e,Re=(V?c.value.listElRef:o.value).offsetHeight,ie=Math.ceil(Re/Pe)+1;if(b!==null){ge.value=!0,ne.value=v.value.getFlattenedNodes(r);const U=ne.value.findIndex(j=>j.key===b);if(~U){const j=yn(ne.value[U].children,n);ne.value.splice(U+1,0,{__motion:!0,mode:"expand",height:V?j.length*Pe:void 0,nodes:V?j.slice(0,ie):j})}}if(N!==null){ne.value=v.value.getFlattenedNodes(n);const U=ne.value.findIndex(j=>j.key===N);if(~U){const j=ne.value[U].children;if(!j)return;ge.value=!0;const Z=yn(j,n);ne.value.splice(U+1,0,{__motion:!0,mode:"collapse",height:V?Z.length*Pe:void 0,nodes:V?Z.slice(0,ie):Z})}}});const zn=T(()=>Dt(P.value)),Mn=T(()=>ge.value?ne.value:P.value);function Ae(){const{value:n}=a;n&&n.sync()}function On(){ge.value=!1,e.virtualScroll&&gn(Ae)}function Q(n){const{getNode:r}=g.value;return n.map(h=>{var b;return((b=r(h))===null||b===void 0?void 0:b.rawNode)||null})}function ye(n,r){const{"onUpdate:expandedKeys":h,onUpdateExpandedKeys:b}=e;z.value=n,h&&A(h,n,r),b&&A(b,n,r)}function on(n,r){const{"onUpdate:checkedKeys":h,onUpdateCheckedKeys:b}=e;y.value=n,b&&A(b,n,r),h&&A(h,n,r)}function Un(n,r){const{"onUpdate:indeterminateKeys":h,onUpdateIndeterminateKeys:b}=e;h&&A(h,n,r),b&&A(b,n,r)}function Xe(n,r){const{"onUpdate:selectedKeys":h,onUpdateSelectedKeys:b}=e;I.value=n,b&&A(b,n,r),h&&A(h,n,r)}function Vn(n){const{onDragenter:r}=e;r&&A(r,n)}function jn(n){const{onDragleave:r}=e;r&&A(r,n)}function Gn(n){const{onDragend:r}=e;r&&A(r,n)}function Hn(n){const{onDragstart:r}=e;r&&A(r,n)}function qn(n){const{onDragover:r}=e;r&&A(r,n)}function Xn(n){const{onDrop:r}=e;r&&A(r,n)}function Se(){Yn(),le()}function Yn(){ae.value=null}function le(){be.value=0,fe.value=null,he.value=null,ve.value=null,we()}function we(){Y&&(window.clearTimeout(Y),Y=null),te=null}function rn(n,r){if(e.disabled||n.disabled)return;if(e.internalUnifySelectCheck&&!e.multiple){Ye(n);return}const{checkedKeys:h,indeterminateKeys:b}=g.value[r?"check":"uncheck"](n.key,L.value,{cascade:e.cascade,checkStrategy:w.value,allowNotLoaded:e.allowCheckingNotLoaded});on(h,Q(h)),Un(b,Q(b))}function Qn(n){if(e.disabled)return;const{value:r}=K,h=r.findIndex(b=>b===n);if(~h){const b=Array.from(r);b.splice(h,1),ye(b,Q(b))}else{const b=v.value.getNode(n);if(!b||b.isLeaf)return;const N=r.concat(n);ye(N,Q(N))}}function an(n){e.disabled||ge.value||Qn(n.key)}function Ye(n){if(!(e.disabled||!e.selectable)){if(ee.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:r,indeterminateKeys:h}}=C;e.multiple?rn(n,!(r.includes(n.key)||h.includes(n.key))):on([n.key],Q([n.key]))}if(e.multiple){const r=Array.from(O.value),h=r.findIndex(b=>b===n.key);~h?e.cancelable&&r.splice(h,1):~h||r.push(n.key),Xe(r,Q(r))}else O.value.includes(n.key)?e.cancelable&&Xe([],[]):Xe([n.key],Q([n.key]))}}function Wn(n){if(Y&&(window.clearTimeout(Y),Y=null),n.isLeaf)return;te=n.key;const r=()=>{if(te!==n.key)return;const{value:h}=he;if(h&&h.key===n.key&&!K.value.includes(n.key)){const b=K.value.concat(n.key);ye(b,Q(b))}Y=null,te=null};n.shallowLoaded?Y=window.setTimeout(()=>{r()},1e3):Y=window.setTimeout(()=>{tn(n).then(()=>{r()})},1e3)}function Zn({event:n,node:r}){!e.draggable||e.disabled||r.disabled||(ln({event:n,node:r},!1),Vn({event:n,node:r.rawNode}))}function Jn({event:n,node:r}){!e.draggable||e.disabled||r.disabled||jn({event:n,node:r.rawNode})}function et(n){n.target===n.currentTarget&&le()}function nt({event:n,node:r}){Se(),!(!e.draggable||e.disabled||r.disabled)&&Gn({event:n,node:r.rawNode})}function tt({event:n,node:r}){!e.draggable||e.disabled||r.disabled||(Te=n.clientX,ae.value=r,Hn({event:n,node:r.rawNode}))}function ln({event:n,node:r},h=!0){var b;if(!e.draggable||e.disabled||r.disabled)return;const{value:N}=ae;if(!N)return;const{allowDrop:W,indent:V}=e;h&&qn({event:n,node:r.rawNode});const Re=n.currentTarget,{height:ie,top:U}=Re.getBoundingClientRect(),j=n.clientY-U;let Z;W({node:r.rawNode,dropPosition:"inside",phase:"drag"})?j<=8?Z="before":j>=ie-8?Z="after":Z="inside":j<=ie/2?Z="before":Z="after";const{value:it}=zn;let F,q;const Qe=it(r.key);if(Qe===null){le();return}let cn=!1;Z==="inside"?(F=r,q="inside"):Z==="before"?r.isFirstChild?(F=r,q="before"):(F=P.value[Qe-1],q="after"):(F=r,q="after"),!F.isLeaf&&K.value.includes(F.key)&&(cn=!0,q==="after"&&(F=P.value[Qe+1],F?q="before":(F=r,q="inside")));const un=F;if(he.value=un,!cn&&N.isLastChild&&N.key===F.key&&(q="after"),q==="after"){let fn=Te-n.clientX,We=0;for(;fn>=V/2&&F.parent!==null&&F.isLastChild&&We<1;)fn-=V,We+=1,F=F.parent;be.value=We}else be.value=0;if((N.contains(F)||q==="inside"&&((b=N.parent)===null||b===void 0?void 0:b.key)===F.key)&&!(N.key===un.key&&N.key===F.key)){le();return}if(!W({node:F.rawNode,dropPosition:q,phase:"drag"})){le();return}if(N.key===F.key)we();else if(te!==F.key)if(q==="inside"){if(e.expandOnDragenter){if(Wn(F),!F.shallowLoaded&&te!==F.key){Se();return}}else if(!F.shallowLoaded){Se();return}}else we();else q!=="inside"&&we();ve.value=q,fe.value=F}function ot({event:n,node:r,dropPosition:h}){if(!e.draggable||e.disabled||r.disabled)return;const{value:b}=ae,{value:N}=fe,{value:W}=ve;if(!(!b||!N||!W)&&!!e.allowDrop({node:N.rawNode,dropPosition:W,phase:"drag"})&&b.key!==N.key){if(W==="before"){const V=b.getNext({includeDisabled:!0});if(V&&V.key===N.key){le();return}}if(W==="after"){const V=b.getPrev({includeDisabled:!0});if(V&&V.key===N.key){le();return}}Xn({event:n,node:N.rawNode,dragNode:b.rawNode,dropPosition:h}),Se()}}function rt(){Ae()}function at(){Ae()}function lt(n){var r;if(e.virtualScroll||e.internalScrollable){const{value:h}=a;if(!((r=h==null?void 0:h.containerRef)===null||r===void 0)&&r.contains(n.relatedTarget))return;ee.value=null}else{const{value:h}=o;if(h!=null&&h.contains(n.relatedTarget))return;ee.value=null}}Le(ee,n=>{var r,h;if(n!==null){if(e.virtualScroll)(r=c.value)===null||r===void 0||r.scrollTo({key:n});else if(e.internalScrollable){const{value:b}=a;if(b===null)return;const N=(h=b.contentRef)===null||h===void 0?void 0:h.querySelector(`[data-key="${Tn(n)}"]`);if(!N)return;b.scrollTo({el:N})}}}),nn(De,{loadingKeysRef:ue,highlightKeySetRef:Ge,displayedCheckedKeysRef:L,displayedIndeterminateKeysRef:D,mergedSelectedKeysRef:O,mergedExpandedKeysRef:K,mergedThemeRef:i,mergedCheckStrategyRef:w,nodePropsRef:E(e,"nodeProps"),disabledRef:E(e,"disabled"),checkableRef:E(e,"checkable"),selectableRef:E(e,"selectable"),onLoadRef:E(e,"onLoad"),draggableRef:E(e,"draggable"),blockLineRef:E(e,"blockLine"),indentRef:E(e,"indent"),cascadeRef:E(e,"cascade"),droppingMouseNodeRef:he,droppingNodeParentRef:qe,draggingNodeRef:ae,droppingPositionRef:ve,droppingOffsetLevelRef:be,fNodesRef:P,pendingNodeKeyRef:ee,internalScrollableRef:E(e,"internalScrollable"),internalCheckboxFocusableRef:E(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:E(e,"renderLabel"),renderPrefixRef:E(e,"renderPrefix"),renderSuffixRef:E(e,"renderSuffix"),renderSwitcherIconRef:E(e,"renderSwitcherIcon"),labelFieldRef:E(e,"labelField"),multipleRef:E(e,"multiple"),handleSwitcherClick:an,handleDragEnd:nt,handleDragEnter:Zn,handleDragLeave:Jn,handleDragStart:tt,handleDrop:ot,handleDragOver:ln,handleSelect:Ye,handleCheck:rn});const dn={handleKeydown:Ve,handleKeyup:Ue},sn=T(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:r,nodeBorderRadius:h,nodeColorHover:b,nodeColorPressed:N,nodeColorActive:W,arrowColor:V,loadingColor:Re,nodeTextColor:ie,nodeTextColorDisabled:U,dropMarkColor:j}}=i.value;return{"--n-arrow-color":V,"--n-loading-color":Re,"--n-bezier":n,"--n-font-size":r,"--n-node-border-radius":h,"--n-node-color-active":W,"--n-node-color-hover":b,"--n-node-color-pressed":N,"--n-node-text-color":ie,"--n-node-text-color-disabled":U,"--n-drop-mark-color":j}}),pe=l?_n("tree",void 0,sn,e):void 0;return{mergedClsPrefix:t,mergedTheme:i,fNodes:Mn,aip:ge,selfElRef:o,virtualListInstRef:c,scrollbarInstRef:a,handleFocusout:lt,handleDragLeaveTree:et,handleScroll:rt,getScrollContainer:d,getScrollContent:u,handleAfterEnter:On,handleResize:at,handleKeydown:dn.handleKeydown,handleKeyup:dn.handleKeyup,cssVars:l?void 0:sn,themeClass:pe==null?void 0:pe.themeClass,onRender:pe==null?void 0:pe.onRender}},render(){var e;const{fNodes:t,internalRenderEmpty:l}=this;if(!t.length&&l)return l();const{mergedClsPrefix:i,blockNode:o,blockLine:a,draggable:c,disabled:d,internalFocusable:u,checkable:f,handleKeyup:v,handleKeydown:m,handleFocusout:g}=this,s=u&&!d,y=s?"0":void 0,k=[`${i}-tree`,f&&`${i}-tree--checkable`,(a||o)&&`${i}-tree--block-node`,a&&`${i}-tree--block-line`],_=w=>"__motion"in w?x(xo,{height:w.height,nodes:w.nodes,clsPrefix:i,mode:w.mode,onAfterEnter:this.handleAfterEnter}):x(Fn,{key:w.key,tmNode:w,clsPrefix:i});if(this.virtualScroll){const{mergedTheme:w,internalScrollablePadding:L}=this,D=Tt(L||"0");return x(pn,{ref:"scrollbarInstRef",onDragleave:c?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:k,theme:w.peers.Scrollbar,themeOverrides:w.peerOverrides.Scrollbar,tabindex:y,onKeyup:s?v:void 0,onKeydown:s?m:void 0,onFocusout:s?g:void 0},{default:()=>{var I;return(I=this.onRender)===null||I===void 0||I.call(this),x(Ut,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Pe,ignoreItemResize:this.aip,paddingTop:D.top,paddingBottom:D.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:D.left,paddingRight:D.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:R})=>_(R)})}})}const{internalScrollable:C}=this;return k.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),C?x(pn,{class:k,tabindex:y,onKeyup:s?v:void 0,onKeydown:s?m:void 0,onFocusout:s?g:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>x("div",{onDragleave:c?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(_))}):x("div",{class:k,tabindex:y,ref:"selfElRef",style:this.cssVars,onKeyup:s?v:void 0,onKeydown:s?m:void 0,onFocusout:s?g:void 0,onDragleave:c?this.handleDragLeaveTree:void 0},t.length?t.map(_):At(this.$slots.empty,()=>{var w,L,D,I;return[x(Vt,{class:`${i}-tree__empty`,theme:(L=(w=this.theme)===null||w===void 0?void 0:w.peers)===null||L===void 0?void 0:L.Empty,themeOverrides:(I=(D=this.themeOverrides)===null||D===void 0?void 0:D.peers)===null||I===void 0?void 0:I.Empty})]}))}});const Ko=e=>(It("data-v-0a75640c"),e=e(),Pt(),e),Do={class:"file"},To={class:"file-content"},Ao=Ko(()=>oe("div",{class:"file-item"},null,-1)),Eo={key:1,class:"file"},Lo={class:"file-content"},Io={class:"file-item"},Po=["src"],Bo={props:{treeData:{type:Array,default:[]},fileData:{type:Object,default:[]},isModal:{type:Boolean,default:!1},showModal:{type:Boolean,default:!0}},emits:["getId"],setup(e,{emit:t}){const l=e,i=E(l,"treeData"),o=E(l,"fileData"),a=B(null);function c({option:d}){return{onClick(){a.value=d.id,t("getId",d.id)}}}return(d,u)=>{const f=_o,v=ao,m=so,g=Bt,s=Ft;return e.isModal?(de(),Je(s,{key:0,show:e.showModal,"onUpdate:show":u[0]||(u[0]=y=>Lt(showModal)?showModal.value=y:null)},{default:se(()=>[ce(g,{title:"\u6587\u4EF6\u7BA1\u7406",bordered:!1,"aria-modal":"true",class:"modal-container"},{default:se(()=>[oe("div",Do,[ce(f,{"block-line":"",data:Ie(i),selectable:"",class:"file-tree","node-props":c,"virtual-scroll":""},null,8,["data"]),oe("div",To,[mn(" id:"+en(a.value)+" ",1),ce(m,{"x-gap":12,"y-gap":8,cols:4},{default:se(()=>[(de(!0),Fe(xn,null,kn(Ie(o),(y,k)=>(de(),Je(v,null,{default:se(()=>[Ao]),_:1}))),256))]),_:1})])])]),_:1})]),_:1},8,["show"])):(de(),Fe("div",Eo,[ce(f,{class:"file-tree","block-line":"",data:Ie(i),"key-field":"id","label-field":"label","children-field":"children",selectable:"","node-props":c},null,8,["data"]),oe("div",Lo,[mn(" id:"+en(a.value)+" ",1),ce(m,{"x-gap":12,"y-gap":8,cols:4},{default:se(()=>[(de(!0),Fe(xn,null,kn(Ie(o),(y,k)=>(de(),Je(v,null,{default:se(()=>[oe("div",Io,[oe("div",null,[oe("img",{src:y.imgUrl,alt:""},null,8,Po)]),oe("span",null,en(y.name),1)])]),_:2},1024))),256))]),_:1})])]))}}};var Fo=Et(Bo,[["__scopeId","data-v-0a75640c"]]);const Oo={setup(e){const t=B([]);Dn(async()=>{const{data:o}=await $t();t.value=o});const l=B({});async function i(o){console.log(o);let{data:a}=await Mt();l.value=a}return(o,a)=>{const c=zt;return de(),Fe("div",null,[ce(c,{position:"absolute","has-sider":""},{default:se(()=>[ce(Fo,{"tree-data":t.value,"file-data":l.value,onGetId:i},null,8,["tree-data","file-data"])]),_:1})])}}};export{Oo as default};
